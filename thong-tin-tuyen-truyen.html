<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Thông tin</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:Arial,sans-serif;padding:20px;}
header{
  background:rgba(255,255,255,.9);
  padding:15px;
  text-align:center;
  border-radius:0 0 20px 20px;
  box-shadow:0 4px 10px rgba(0,0,0,.4);
  position:fixed;
  top:0;
  width:100%;
  z-index:1000;
}
header h1{color:#007bff;margin-bottom:10px;}
header button{margin:3px;padding:8px 12px;border:none;border-radius:8px;cursor:pointer;background:#1e3c72;color:#fff;}
section{max-width:900px;margin:120px auto 40px;}
.card{background:rgba(255,255,255,.65);padding:25px;margin:20px 0;border-radius:20px;box-shadow:0 6px 15px rgba(0,0,0,.3);}
.editable[contenteditable="true"]{outline:2px dashed red;background:#fff8c6;}
</style>
</head>
<body>

<header>
  <h1 class="editable" data-key="title-main">Thông tin tuyên truyền</h1>
  <button onclick="adminLogin()">🔐 Quản trị</button>
  <button id="editBtn" onclick="toggleEdit()" style="display:none">✏️ Chỉnh sửa</button>
  <button id="saveBtn" onclick="saveContent()" style="display:none">💾 Lưu</button>
  <button id="logoutBtn" onclick="logoutAdmin()" style="display:none">🚪 Thoát</button>
</header>

<section>
  <div class="card">
    <h2 class="editable" data-key="part1-title">1. Giới thiệu Lữ đoàn</h2>
    <p class="editable" data-key="part1-text">Lữ đoàn 584 là một đơn vị chủ lực trực thuộc Bộ Chỉ huy Quân sự tỉnh Đắk Lắk. Đơn vị có nhiệm vụ huấn luyện, sẵn sàng chiến đấu và bảo vệ vững chắc địa bàn chiến lược Tây Nguyên.</p>
    <p class="editable" data-key="part1-text2">Ngoài ra, lữ đoàn còn phối hợp với các lực lượng địa phương để duy trì a chính trị, trật tự xã hội, tham gia cứu hộ, cứu nạn và hỗ trợ nhân dân khi xảy ra thiên tai hoặc các 


</p>
  </div>
  <div class="card">
    <h2 class="editable" data-key="part2-title">2. Truyền thống và thành tích</h2>
    <ul>
      <li class="editable" data-key="part2-li1">Luôn trung thành tuyệt đối với Đảng, Tổ quốc và Nhân dân; phát huy phẩm chất “Bộ đội Cụ Hồ”.</li>
      <li class="editable" data-key="part2-li2">Nhiều năm liền đạt danh hiệu đơn vị vững mạnh toàn diện, được Bộ Quốc phòng và UBND tỉnh khen thưởng.</li>
      <li class="editable" data-key="part2-li3">Tham gia hiệu quả các hoạt động dân vận, giúp nhân dân khắc phục hậu quả thiên tai và xây dựng nông thôn mới..</li>
      <li class="editable" data-key="part2-li4">Luôn trung thành tuyệt đối với Đảng, Tổ quốc và Nhân dân; phát huy phẩm chất “Bộ đội Cụ Hồ”.</li>
    </ul>
  </div>
  <div class="card">
    <h2 class="editable" data-key="part3-title">3. Nhiệm vụ và chức nnnn sửa ở đây</h2>
    <ul>
      <li class="editable" data-key="part3-li1">Nhiệm vụ chính: Huấn luyện, sẵn sàng chiến đấu; bảo vệ địa bàn chiến lược Tây Nguyên.</li>
      <li class="editable" data-key="part3-li2">Phòng chống thiên tai: Tham gia cứu hộ, cứu nạn và hỗ trợ nhân dân khi xảy ra lũ lụt, hạn hán hoặc cháy rừng.</li>
      <li class="editable" data-key="part3-li3">Chức năng: Là lực lượng cơ động, sẵn sàng thực hiện nhiệm vụ đột xuất khi có lệnh.</li>
      <li class="editable" data-key="part3-li4">Lãnh đạo lữ đoàn:.</li>
    </ul>
  </div>
  <div class="card">
    <h2 class="editable" data-key="part4-title">4. Kỷ luật và tinh thần chiến sĩ</h2>
    <p class="editable" data-key="part4-text">Thực hiện nghiêm điều lệnh, điều lệ Quân đội nhân dân Việt Nam..</p>
  </div>
</section>

<div style="text-align:center; margin:30px 0;">
  <button onclick="window.location.href='noidung-hoc.html'" style="background:#1e3c72;color:#fff;border:none;padding:10px 18px;border-radius:12px;cursor:pointer;font-size:0.95rem;">⬅ Quay lại</button>
</div>

<script>
const ADMIN_PASSWORD = "303"; 
let isAdmin = false;

// Đặt URL Apps Script của bạn
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx7kPeWL2FngTLAuNzlks0W1702HtaMpz2s_eRDJUSBzYmsEXkQvd7YTTFlzYWlE6AA/exec";

const editBtn = document.getElementById("editBtn");
const saveBtn = document.getElementById("saveBtn");
const logoutBtn = document.getElementById("logoutBtn");

// Đăng nhập quản trị
function adminLogin() {
  const pass = prompt("Nhập mật khẩu quản trị:");
  if (pass === ADMIN_PASSWORD) {
    isAdmin = true;
    editBtn.style.display = saveBtn.style.display = logoutBtn.style.display = "inline-block";
    alert("✅ Đã vào chế độ quản trị");
  }
}

// Bật/tắt chế độ chỉnh sửa
function toggleEdit() {
  if (!isAdmin) return;
  document.querySelectorAll(".editable").forEach(el => {
    el.contentEditable = el.contentEditable !== "true";
  });
}

// Lưu nội dung lên Sheet
async function saveContent() {
  if (!isAdmin) return;
  const data = {};
  document.querySelectorAll(".editable").forEach(el => {
    data[el.dataset.key] = el.innerHTML;
  });
  try {
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify(data)
    });
    const result = await res.json();
    alert("💾 Đã lưu nội dung lên Google Sheet: " + result.status);
  } catch (err) {
    alert("❌ Lỗi lưu: " + err.message);
  }
}

// Tải dữ liệu từ Sheet
async function loadContent() {
  try {
    const res = await fetch(SCRIPT_URL);
    const data = await res.json();
    document.querySelectorAll(".editable").forEach(el => {
      if (data[el.dataset.key]) el.innerHTML = data[el.dataset.key];
    });
  } catch (err) {
    console.error("❌ Lỗi tải dữ liệu:", err);
  }
}

// Đăng xuất quản trị
function logoutAdmin() {
  isAdmin = false;
  document.querySelectorAll(".editable").forEach(el => el.contentEditable = false);
  editBtn.style.display = saveBtn.style.display = logoutBtn.style.display = "none";
}

// Khi mở trang, tải dữ liệu
window.onload = loadContent;
</script>

</body>
</html>
